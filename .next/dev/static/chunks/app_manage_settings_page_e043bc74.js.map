{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Fullstacks/timetable2026/Timetable/app/manage/settings/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst DAY_OPTIONS = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\r\n\r\nexport default function SettingsPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState(\"\");\r\n\r\n  const [days, setDays] = useState([\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"]);\r\n  const [start_hour, setStartHour] = useState(9);\r\n  const [end_hour, setEndHour] = useState(17);\r\n  const [lunch_start_hour, setLunchStartHour] = useState(12);\r\n\r\n  useEffect(() => {\r\n    async function loadSettings() {\r\n      try {\r\n        const res = await fetch(\"/api/admin/settings\");\r\n        const data = await res.json();\r\n        if (res.ok && data.settings) {\r\n          const s = data.settings;\r\n          setDays(Array.isArray(s.days) && s.days.length > 0 ? s.days : [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"]);\r\n          setStartHour(s.start_hour != null ? s.start_hour : 9);\r\n          setEndHour(s.end_hour != null ? s.end_hour : 17);\r\n          setLunchStartHour(s.lunch_start_hour != null ? s.lunch_start_hour : 12);\r\n        }\r\n      } catch (err) {\r\n        setError(\"Failed to load settings\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    loadSettings();\r\n  }, []);\r\n\r\n  function handleDayToggle(day) {\r\n    setDays((prev) =>\r\n      prev.includes(day) ? prev.filter((d) => d !== day) : [...prev, day]\r\n    );\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n    setSaving(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/admin/settings\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          days,\r\n          start_hour,\r\n          end_hour,\r\n          lunch_start_hour,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || \"Failed to save settings\");\r\n        setSaving(false);\r\n        return;\r\n      }\r\n\r\n      setSuccess(\"Settings saved successfully!\");\r\n      setSaving(false);\r\n      setTimeout(() => setSuccess(\"\"), 3000);\r\n    } catch (err) {\r\n      setError(\"Something went wrong. Please try again.\");\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <main className=\"mx-auto max-w-4xl px-4 py-6\">\r\n        <p className=\"text-slate-600\">Loading settings...</p>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"mx-auto max-w-4xl px-4 py-6\">\r\n      <h1 className=\"mb-4 text-2xl font-semibold text-slate-900\">\r\n        Timetable Settings\r\n      </h1>\r\n      <p className=\"mb-6 text-sm text-slate-600\">\r\n        Configure days, working hours, and lunch break for your institute timetable.\r\n      </p>\r\n\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"space-y-6 rounded-lg bg-white p-6 shadow-sm ring-1 ring-[#E5E7EB]\"\r\n      >\r\n        {/* Days */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"block text-sm font-medium text-slate-700\">\r\n            Working Days\r\n          </label>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {DAY_OPTIONS.map((day) => (\r\n              <label\r\n                key={day}\r\n                className=\"flex items-center gap-2 rounded-md border border-[#CBD5E1] bg-white px-3 py-2 text-sm text-slate-700 hover:bg-slate-50\"\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={days.includes(day)}\r\n                  onChange={() => handleDayToggle(day)}\r\n                  className=\"h-4 w-4 rounded border-[#CBD5E1] text-[#1A4C8B] focus:ring-[#BFDBFE]\"\r\n                />\r\n                <span>{day}</span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n          <p className=\"text-xs text-slate-500\">\r\n            Select the days when classes are scheduled.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Start Hour */}\r\n        <div className=\"space-y-1.5\">\r\n          <label\r\n            htmlFor=\"start_hour\"\r\n            className=\"block text-sm font-medium text-slate-700\"\r\n          >\r\n            Start Hour\r\n          </label>\r\n          <input\r\n            id=\"start_hour\"\r\n            type=\"number\"\r\n            min={0}\r\n            max={23}\r\n            value={start_hour}\r\n            onChange={(e) => setStartHour(Number(e.target.value))}\r\n            required\r\n            className=\"block w-full rounded-md border border-[#CBD5E1] bg-white px-3 py-2 text-sm text-slate-900 outline-none ring-2 ring-transparent focus:border-[#1A4C8B] focus:ring-[#BFDBFE]\"\r\n          />\r\n          <p className=\"text-xs text-slate-500\">\r\n            Hour when classes start (0-23, e.g., 9 for 9 AM).\r\n          </p>\r\n        </div>\r\n\r\n        {/* End Hour */}\r\n        <div className=\"space-y-1.5\">\r\n          <label\r\n            htmlFor=\"end_hour\"\r\n            className=\"block text-sm font-medium text-slate-700\"\r\n          >\r\n            End Hour\r\n          </label>\r\n          <input\r\n            id=\"end_hour\"\r\n            type=\"number\"\r\n            min={0}\r\n            max={23}\r\n            value={end_hour}\r\n            onChange={(e) => setEndHour(Number(e.target.value))}\r\n            required\r\n            className=\"block w-full rounded-md border border-[#CBD5E1] bg-white px-3 py-2 text-sm text-slate-900 outline-none ring-2 ring-transparent focus:border-[#1A4C8B] focus:ring-[#BFDBFE]\"\r\n          />\r\n          <p className=\"text-xs text-slate-500\">\r\n            Hour when classes end (0-23, e.g., 17 for 5 PM). Must be after start hour.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Lunch Start Hour */}\r\n        <div className=\"space-y-1.5\">\r\n          <label\r\n            htmlFor=\"lunch_start_hour\"\r\n            className=\"block text-sm font-medium text-slate-700\"\r\n          >\r\n            Lunch Start Hour\r\n          </label>\r\n          <input\r\n            id=\"lunch_start_hour\"\r\n            type=\"number\"\r\n            min={0}\r\n            max={23}\r\n            value={lunch_start_hour}\r\n            onChange={(e) => setLunchStartHour(Number(e.target.value))}\r\n            required\r\n            className=\"block w-full rounded-md border border-[#CBD5E1] bg-white px-3 py-2 text-sm text-slate-900 outline-none ring-2 ring-transparent focus:border-[#1A4C8B] focus:ring-[#BFDBFE]\"\r\n          />\r\n          <p className=\"text-xs text-slate-500\">\r\n            Hour when lunch break starts (0-23, e.g., 12 for 12 PM).\r\n          </p>\r\n        </div>\r\n\r\n        {error && (\r\n          <p className=\"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm font-medium text-red-700\">\r\n            {error}\r\n          </p>\r\n        )}\r\n\r\n        {success && (\r\n          <p className=\"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm font-medium text-emerald-700\">\r\n            {success}\r\n          </p>\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={saving}\r\n          className=\"rounded-md bg-[#1A4C8B] px-4 py-2 text-sm font-medium text-white hover:bg-blue-800 disabled:opacity-70\"\r\n        >\r\n          {saving ? \"Savingâ€¦\" : \"Save Settings\"}\r\n        </button>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIA,MAAM,cAAc;IAAC;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;CAAM;AAEtD,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;QAAC;QAAO;QAAO;QAAO;QAAO;KAAM;IACpE,MAAM,CAAC,YAAY,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC5C,MAAM,CAAC,UAAU,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACxC,MAAM,CAAC,kBAAkB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IAEvD,IAAA,0KAAS;kCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAAM;oBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,IAAI,IAAI,EAAE,IAAI,KAAK,QAAQ,EAAE;wBAC3B,MAAM,IAAI,KAAK,QAAQ;wBACvB,QAAQ,MAAM,OAAO,CAAC,EAAE,IAAI,KAAK,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,EAAE,IAAI,GAAG;4BAAC;4BAAO;4BAAO;4BAAO;4BAAO;yBAAM;wBACjG,aAAa,EAAE,UAAU,IAAI,OAAO,EAAE,UAAU,GAAG;wBACnD,WAAW,EAAE,QAAQ,IAAI,OAAO,EAAE,QAAQ,GAAG;wBAC7C,kBAAkB,EAAE,gBAAgB,IAAI,OAAO,EAAE,gBAAgB,GAAG;oBACtE;gBACF,EAAE,OAAO,KAAK;oBACZ,SAAS;gBACX,SAAU;oBACR,WAAW;gBACb;YACF;YACA;QACF;iCAAG,EAAE;IAEL,SAAS,gBAAgB,GAAG;QAC1B,QAAQ,CAAC,OACP,KAAK,QAAQ,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,IAAM,MAAM,OAAO;mBAAI;gBAAM;aAAI;IAEvE;IAEA,eAAe,aAAa,CAAC;QAC3B,EAAE,cAAc;QAChB,SAAS;QACT,WAAW;QACX,UAAU;QAEV,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,uBAAuB;gBAC7C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA;oBACA;oBACA;gBACF;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,SAAS,KAAK,OAAO,IAAI;gBACzB,UAAU;gBACV;YACF;YAEA,WAAW;YACX,UAAU;YACV,WAAW,IAAM,WAAW,KAAK;QACnC,EAAE,OAAO,KAAK;YACZ,SAAS;YACT,UAAU;QACZ;IACF;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAK,WAAU;sBACd,cAAA,6LAAC;gBAAE,WAAU;0BAAiB;;;;;;;;;;;IAGpC;IAEA,qBACE,6LAAC;QAAK,WAAU;;0BACd,6LAAC;gBAAG,WAAU;0BAA6C;;;;;;0BAG3D,6LAAC;gBAAE,WAAU;0BAA8B;;;;;;0BAI3C,6LAAC;gBACC,UAAU;gBACV,WAAU;;kCAGV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CAA2C;;;;;;0CAG5D,6LAAC;gCAAI,WAAU;0CACZ,YAAY,GAAG,CAAC,CAAC,oBAChB,6LAAC;wCAEC,WAAU;;0DAEV,6LAAC;gDACC,MAAK;gDACL,SAAS,KAAK,QAAQ,CAAC;gDACvB,UAAU,IAAM,gBAAgB;gDAChC,WAAU;;;;;;0DAEZ,6LAAC;0DAAM;;;;;;;uCATF;;;;;;;;;;0CAaX,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAMxC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAQ;gCACR,WAAU;0CACX;;;;;;0CAGD,6LAAC;gCACC,IAAG;gCACH,MAAK;gCACL,KAAK;gCACL,KAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,aAAa,OAAO,EAAE,MAAM,CAAC,KAAK;gCACnD,QAAQ;gCACR,WAAU;;;;;;0CAEZ,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAMxC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAQ;gCACR,WAAU;0CACX;;;;;;0CAGD,6LAAC;gCACC,IAAG;gCACH,MAAK;gCACL,KAAK;gCACL,KAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;gCACjD,QAAQ;gCACR,WAAU;;;;;;0CAEZ,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAMxC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAQ;gCACR,WAAU;0CACX;;;;;;0CAGD,6LAAC;gCACC,IAAG;gCACH,MAAK;gCACL,KAAK;gCACL,KAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,kBAAkB,OAAO,EAAE,MAAM,CAAC,KAAK;gCACxD,QAAQ;gCACR,WAAU;;;;;;0CAEZ,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;oBAKvC,uBACC,6LAAC;wBAAE,WAAU;kCACV;;;;;;oBAIJ,yBACC,6LAAC;wBAAE,WAAU;kCACV;;;;;;kCAIL,6LAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,SAAS,YAAY;;;;;;;;;;;;;;;;;;AAKhC;GAnNwB;KAAA"}}]
}