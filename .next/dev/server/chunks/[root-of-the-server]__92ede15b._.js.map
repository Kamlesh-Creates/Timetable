{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Timetable/lib/db.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error(\"Please define the MONGODB_URI environment variable\");\r\n}\r\n\r\nlet cached = global._mongoose;\r\n\r\nif (!cached) {\r\n  cached = global._mongoose = { conn: null, promise: null };\r\n}\r\n\r\nexport async function connectToDatabase() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    cached.promise = mongoose\r\n      .connect(MONGODB_URI, {\r\n        dbName: process.env.MONGODB_DB || \"timetable\",\r\n      })\r\n      .then((mongooseInstance) => mongooseInstance);\r\n  }\r\n\r\n  cached.conn = await cached.promise;\r\n  return cached.conn;\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI,SAAS,yDAAO,SAAS;AAE7B,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAO,SAAS,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AAC1D;AAEO,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,oHAAQ,CACtB,OAAO,CAAC,aAAa;YACpB,QAAQ,QAAQ,GAAG,CAAC,UAAU,IAAI;QACpC,GACC,IAAI,CAAC,CAAC,mBAAqB;IAChC;IAEA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Timetable/models/Timetable.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst timetableSchema = new mongoose.Schema(\r\n  {\r\n    data: { type: Object, required: true },\r\n    result: { type: Object },\r\n    generatedAt: { type: Date, default: Date.now },\r\n    divisions: [{ type: String }],\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nif (mongoose.models.Timetable) {\r\n  delete mongoose.models.Timetable;\r\n}\r\n\r\nexport default mongoose.model(\"Timetable\", timetableSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,IAAI,oHAAQ,CAAC,MAAM,CACzC;IACE,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,QAAQ;QAAE,MAAM;IAAO;IACvB,aAAa;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;IAC7C,WAAW;QAAC;YAAE,MAAM;QAAO;KAAE;AAC/B,GACA;IAAE,YAAY;AAAK;AAGrB,IAAI,oHAAQ,CAAC,MAAM,CAAC,SAAS,EAAE;IAC7B,OAAO,oHAAQ,CAAC,MAAM,CAAC,SAAS;AAClC;uCAEe,oHAAQ,CAAC,KAAK,CAAC,aAAa"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Timetable/models/Setting.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst settingSchema = new mongoose.Schema(\r\n  {\r\n    days: [{ type: String, trim: true }], // e.g. [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"]\r\n    start_hour: { type: Number, min: 0, max: 23 }, // e.g. 9\r\n    end_hour: { type: Number, min: 0, max: 23 }, // e.g. 17\r\n    lunch_start_hour: { type: Number, min: 0, max: 23 } // e.g. 12\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nconst Setting =\r\n  mongoose.models.Setting || mongoose.model(\"Setting\", settingSchema);\r\n\r\nexport default Setting;\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,oHAAQ,CAAC,MAAM,CACvC;IACE,MAAM;QAAC;YAAE,MAAM;YAAQ,MAAM;QAAK;KAAE;IACpC,YAAY;QAAE,MAAM;QAAQ,KAAK;QAAG,KAAK;IAAG;IAC5C,UAAU;QAAE,MAAM;QAAQ,KAAK;QAAG,KAAK;IAAG;IAC1C,kBAAkB;QAAE,MAAM;QAAQ,KAAK;QAAG,KAAK;IAAG,EAAE,UAAU;AAChE,GACA;IAAE,YAAY;AAAK;AAGrB,MAAM,UACJ,oHAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAC,WAAW;uCAExC"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Timetable/lib/timetablePdf.js"],"sourcesContent":["function pad(value) {\r\n  return value.toString().padStart(2, \"0\");\r\n}\r\n\r\nfunction formatLabel(hour) {\r\n  const h = hour % 12 || 12;\r\n  const suffix = hour >= 12 ? \"PM\" : \"AM\";\r\n  return `${pad(h)}:00 ${suffix}`;\r\n}\r\n\r\nfunction renderSlotLine(batchKey, slot = {}, mode = \"lab\") {\r\n  if (!slot || typeof slot !== \"object\" || Object.keys(slot).length === 0) {\r\n    return \"\";\r\n  }\r\n\r\n  const classRaw = slot.class ? String(slot.class) : \"\";\r\n  const teacherRaw = slot.teacher ? String(slot.teacher) : \"\";\r\n  const roomRaw = slot.room ? String(slot.room) : \"\";\r\n\r\n  if (!classRaw && !teacherRaw && !roomRaw) {\r\n    return \"\";\r\n  }\r\n\r\n  const parts = [];\r\n  if (teacherRaw) parts.push(teacherRaw);\r\n  if (roomRaw) parts.push(roomRaw);\r\n  const suffix = parts.length > 0 ? ` (${parts.join(\" \")})` : \"\";\r\n\r\n  // mode === \"lecture\": single line without batch label\r\n  const lineText =\r\n    mode === \"lecture\"\r\n      ? `${classRaw || \"\"}${suffix}`.trim()\r\n      : `${batchKey}: ${classRaw || \"\"}${suffix}`.trim();\r\n\r\n  let color = \"#0d47a1\"; // lecture → blue\r\n  if (mode === \"lab\") {\r\n    color = \"#1b5e20\";\r\n  }\r\n\r\n  return `<div style=\"color:${color};font-size:11px;line-height:1.2;\">${lineText}</div>`;\r\n}\r\n\r\nexport function getTimetableHtml(\r\n  timetableData,\r\n  divisionName,\r\n  settings = {},\r\n  generatedAt = new Date()\r\n) {\r\n  if (!timetableData || !divisionName || !timetableData[divisionName]) {\r\n    return `<p style=\"font-family:sans-serif;padding:20px;\">No timetable data found for division: ${divisionName}</p>`;\r\n  }\r\n\r\n  const batchesForDivision = timetableData[divisionName] || {};\r\n  const batchKeys = Object.keys(batchesForDivision);\r\n\r\n  if (!batchKeys.length) {\r\n    return `<p style=\"font-family:sans-serif;padding:20px;\">No timetable data found for division: ${divisionName}</p>`;\r\n  }\r\n\r\n  const firstBatchSchedule = batchesForDivision[batchKeys[0]] || {};\r\n  const days = settings.days?.length\r\n    ? settings.days\r\n    : Object.keys(firstBatchSchedule);\r\n\r\n  // Fixed college-style columns with time ranges.\r\n  // Mapping: 0–7 indices from JSON → 8 teaching periods; period index 3 is lunch.\r\n  const columns = [\r\n    { label: \"9:00–10:00\", periodIndex: 0 },\r\n    { label: \"10:00–11:00\", periodIndex: 1 },\r\n    { label: \"11:00–12:00\", periodIndex: 2 },\r\n    { label: \"LUNCH BREAK\", periodIndex: 3, isLunchColumn: true },\r\n    { label: \"1:00–2:00\", periodIndex: 4 },\r\n    { label: \"2:00–3:00\", periodIndex: 5 },\r\n    { label: \"3:00–4:00\", periodIndex: 6 },\r\n    { label: \"4:00–5:00\", periodIndex: 7 },\r\n  ];\r\n\r\n  const headerHtml = `\r\n    <!-- Top header with logo, institute name, revision/date -->\r\n    <div style=\"display:flex;align-items:center;justify-content:space-between;border-bottom:2px solid #000;padding-bottom:6px;margin-bottom:6px;\">\r\n      <div style=\"width:80px;height:80px;border:1px solid #000;display:flex;align-items:center;justify-content:center;font-size:10px;\">\r\n        LOGO\r\n      </div>\r\n      <div style=\"flex:1;text-align:center;\">\r\n        <div style=\"font-size:20px;font-weight:700;text-transform:uppercase;\">Your Institute Name</div>\r\n        <div style=\"font-size:14px;margin-top:2px;\">(Affiliated to XYZ University)</div>\r\n      </div>\r\n      <div style=\"border:1px solid #000;padding:6px 10px;font-size:11px;min-width:120px;\">\r\n        <div><strong>Rev. Date:</strong> ${new Date(\r\n          generatedAt\r\n        ).toLocaleDateString()}</div>\r\n        <div><strong>Print Date:</strong> ${new Date().toLocaleDateString()}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Title -->\r\n    <div style=\"text-align:center;margin-bottom:6px;\">\r\n      <span style=\"font-size:16px;font-weight:700;text-transform:uppercase;\">Class Time Table</span>\r\n    </div>\r\n\r\n    <!-- Metadata row -->\r\n    <table style=\"width:100%;border-collapse:collapse;margin-bottom:8px;font-size:11px;\">\r\n      <tr>\r\n        <td style=\"border:1px solid #000;padding:4px 6px;width:22%;\">\r\n          <strong>Department:</strong> Institute of Excellence\r\n        </td>\r\n        <td style=\"border:1px solid #000;padding:4px 6px;width:16%;\">\r\n          <strong>Academic Year:</strong> 2024-25\r\n        </td>\r\n        <td style=\"border:1px solid #000;padding:4px 6px;width:14%;\">\r\n          <strong>Division:</strong> ${divisionName}\r\n        </td>\r\n        <td style=\"border:1px solid #000;padding:4px 6px;width:12%;\">\r\n          <strong>Batch:</strong> ${batchKeys.join(\", \")}\r\n        </td>\r\n        <td style=\"border:1px solid #000;padding:4px 6px;width:18%;\">\r\n          <strong>Class Teacher:</strong> __________\r\n        </td>\r\n        <td style=\"border:1px solid #000;padding:4px 6px;width:18%;\">\r\n          <strong>W.E.F Date:</strong> ${new Date().toLocaleDateString()}\r\n        </td>\r\n      </tr>\r\n    </table>\r\n  `;\r\n\r\n  const tableHead = `\r\n    <thead>\r\n      <tr>\r\n        <th class=\"day-column\" style=\"border:2px solid #000;padding:6px;text-align:center;font-size:11px;\">Day</th>\r\n        ${columns\r\n          .map((col) => {\r\n            if (col.isLunchColumn) {\r\n              return `\r\n                <th class=\"period-column\" style=\"border:2px solid #000;padding:6px 4px;text-align:center;font-size:11px;vertical-align:middle;\">\r\n                  ${col.label}\r\n                </th>\r\n              `;\r\n            }\r\n            return `<th class=\"period-column\" style=\"border:2px solid #000;padding:6px 4px;text-align:center;font-size:11px;\">${col.label}</th>`;\r\n          })\r\n          .join(\"\")}\r\n      </tr>\r\n    </thead>\r\n  `;\r\n\r\n  const tableBody = `\r\n    <tbody>\r\n      ${days\r\n        .map((day) => {\r\n          return `\r\n            <tr>\r\n              <td class=\"day-column\" style=\"border:2px solid #000;padding:6px 4px;font-weight:700;background-color:#f5f5f5;text-align:center;font-size:11px;\">${day}</td>\r\n              ${(() => {\r\n                const cells = [];\r\n                for (let colIndex = 0; colIndex < columns.length; colIndex++) {\r\n                  const col = columns[colIndex];\r\n\r\n                  if (col.isLunchColumn) {\r\n                    cells.push(\r\n                      `<td class=\"period-column\" style=\"border:2px solid #000;padding:6px 4px;text-align:center;vertical-align:middle;background-color:#fff9c4;font-size:11px;font-weight:700;\">LUNCH</td>`\r\n                    );\r\n                    continue;\r\n                  }\r\n\r\n                  const idx = col.periodIndex;\r\n\r\n                  const slotsForColumn = batchKeys.map((batchKey) => {\r\n                    const batchSchedule = batchesForDivision[batchKey] || {};\r\n                    const slotsForDay = Array.isArray(batchSchedule[day])\r\n                      ? batchSchedule[day]\r\n                      : [];\r\n                    const slot =\r\n                      Array.isArray(slotsForDay) && idx != null\r\n                        ? slotsForDay[idx]\r\n                        : null;\r\n                    return { batchKey, slot };\r\n                  });\r\n\r\n                  const normalized = slotsForColumn.map(({ batchKey, slot }) => {\r\n                    if (!slot || typeof slot !== \"object\") {\r\n                      return {\r\n                        batchKey,\r\n                        slot: null,\r\n                        type: \"\",\r\n                        cls: \"\",\r\n                      };\r\n                    }\r\n                    const type = slot.type ? String(slot.type).toUpperCase() : \"\";\r\n                    const cls = slot.class ? String(slot.class).toUpperCase() : \"\";\r\n                    return { batchKey, slot, type, cls };\r\n                  });\r\n\r\n                  const hasLunch = normalized.some(({ cls }) => cls === \"LUNCH\");\r\n                  const allFreeOrEmpty = normalized.every(({ slot, type }) => {\r\n                    if (!slot || !Object.keys(slot).length) return true;\r\n                    return type === \"FREE\";\r\n                  });\r\n\r\n                  // If lunch is detected in regular period, skip it (lunch has dedicated column)\r\n                  if (hasLunch) {\r\n                    // Skip this cell, lunch should only appear in the dedicated lunch column\r\n                    continue;\r\n                  }\r\n\r\n                  // Try to detect 2-hour LAB block starting at this column\r\n                  let usedColspan2 = false;\r\n                  const nextCol = columns[colIndex + 1];\r\n                  if (\r\n                    nextCol &&\r\n                    !nextCol.isLunchColumn &&\r\n                    typeof nextCol.periodIndex === \"number\" &&\r\n                    typeof idx === \"number\" &&\r\n                    nextCol.periodIndex === idx + 1\r\n                  ) {\r\n                    const idxNext = nextCol.periodIndex;\r\n                    const hasSpanningLab = batchKeys.some((batchKey) => {\r\n                      const batchSchedule = batchesForDivision[batchKey] || {};\r\n                      const slotsForDay = Array.isArray(batchSchedule[day])\r\n                        ? batchSchedule[day]\r\n                        : [];\r\n                      const curr =\r\n                        Array.isArray(slotsForDay) && idx != null\r\n                          ? slotsForDay[idx]\r\n                          : null;\r\n                      const next =\r\n                        Array.isArray(slotsForDay) && idxNext != null\r\n                          ? slotsForDay[idxNext]\r\n                          : null;\r\n\r\n                      if (!curr || !next) return false;\r\n                      if (\r\n                        typeof curr !== \"object\" ||\r\n                        typeof next !== \"object\"\r\n                      ) {\r\n                        return false;\r\n                      }\r\n\r\n                      const currType = curr.type\r\n                        ? String(curr.type).toUpperCase()\r\n                        : \"\";\r\n                      const nextType = next.type\r\n                        ? String(next.type).toUpperCase()\r\n                        : \"\";\r\n\r\n                      if (currType !== \"LAB\" || nextType !== \"LAB\") return false;\r\n\r\n                      const currClass = curr.class || \"\";\r\n                      const nextClass = next.class || \"\";\r\n                      const currTeacher = curr.teacher || \"\";\r\n                      const nextTeacher = next.teacher || \"\";\r\n\r\n                      return (\r\n                        currClass === nextClass && currTeacher === nextTeacher\r\n                      );\r\n                    });\r\n\r\n                    if (hasSpanningLab) {\r\n                      // Build LAB lines using the first period (idx)\r\n                      const labLines = batchKeys\r\n                        .map((batchKey) => {\r\n                          const batchSchedule = batchesForDivision[batchKey] || {};\r\n                          const slotsForDay = Array.isArray(batchSchedule[day])\r\n                            ? batchSchedule[day]\r\n                            : [];\r\n                          const curr =\r\n                            Array.isArray(slotsForDay) && idx != null\r\n                              ? slotsForDay[idx]\r\n                              : null;\r\n                          const next =\r\n                            Array.isArray(slotsForDay) && nextCol.periodIndex != null\r\n                              ? slotsForDay[nextCol.periodIndex]\r\n                              : null;\r\n\r\n                          if (!curr || !next) return \"\";\r\n                          if (\r\n                            typeof curr !== \"object\" ||\r\n                            typeof next !== \"object\"\r\n                          ) {\r\n                            return \"\";\r\n                          }\r\n\r\n                          const currType = curr.type\r\n                            ? String(curr.type).toUpperCase()\r\n                            : \"\";\r\n                          const nextType = next.type\r\n                            ? String(next.type).toUpperCase()\r\n                            : \"\";\r\n\r\n                          if (currType !== \"LAB\" || nextType !== \"LAB\") return \"\";\r\n\r\n                          const currClass = curr.class || \"\";\r\n                          const nextClass = next.class || \"\";\r\n                          const currTeacher = curr.teacher || \"\";\r\n                          const nextTeacher = next.teacher || \"\";\r\n\r\n                          if (\r\n                            currClass !== nextClass ||\r\n                            currTeacher !== nextTeacher\r\n                          ) {\r\n                            return \"\";\r\n                          }\r\n\r\n                          return renderSlotLine(batchKey, curr, \"lab\");\r\n                        })\r\n                        .filter((html) => html && html.trim().length > 0)\r\n                        .join(\"\");\r\n\r\n                      cells.push(\r\n                        `<td colspan=\"2\" class=\"period-column\" style=\"border:2px solid #000;padding:4px 3px;text-align:center;vertical-align:top;background-color:#dcedc8;font-size:11px;\">\r\n                          ${labLines}\r\n                        </td>`\r\n                      );\r\n                      usedColspan2 = true;\r\n                      colIndex++; // skip next column\r\n                      continue;\r\n                    }\r\n                  }\r\n\r\n                  if (allFreeOrEmpty) {\r\n                    cells.push(\r\n                      `<td class=\"period-column\" style=\"border:2px solid #000;padding:4px 3px;text-align:center;vertical-align:top;background-color:#ffffff;font-size:11px;\">\r\n                      </td>`\r\n                    );\r\n                    continue;\r\n                  }\r\n\r\n                  const lectureSlots = normalized.filter(\r\n                    ({ slot, type }) =>\r\n                      slot &&\r\n                      type === \"LECTURE\" &&\r\n                      (slot.class || slot.teacher || slot.room)\r\n                  );\r\n\r\n                  let cellHtml = \"\";\r\n                  let bgColor = \"#e3f2fd\"; // lecture/light blue by default\r\n\r\n                  if (lectureSlots.length > 0) {\r\n                    // Show only the first lecture, without batch label\r\n                    const { slot } = lectureSlots[0];\r\n                    cellHtml = renderSlotLine(\"\", slot, \"lecture\");\r\n                    bgColor = \"#e3f2fd\";\r\n                  } else {\r\n                    // Otherwise treat as labs: one line per batch with LAB\r\n                    const labSlots = normalized.filter(\r\n                      ({ slot, type }) =>\r\n                        slot &&\r\n                        type === \"LAB\" &&\r\n                        (slot.class || slot.teacher || slot.room)\r\n                    );\r\n\r\n                    if (labSlots.length > 0) {\r\n                      bgColor = \"#dcedc8\"; // light green\r\n                      cellHtml = labSlots\r\n                        .map(({ batchKey, slot }) =>\r\n                          renderSlotLine(batchKey, slot, \"lab\")\r\n                        )\r\n                        .join(\"\");\r\n                    } else {\r\n                      // Fallback: non-FREE, non-LAB, non-LECTURE → show first as lecture-style\r\n                      const nonFree = normalized.filter(\r\n                        ({ slot, type }) =>\r\n                          slot &&\r\n                          type !== \"FREE\" &&\r\n                          (slot.class || slot.teacher || slot.room)\r\n                      );\r\n                      if (nonFree.length > 0) {\r\n                        const { slot } = nonFree[0];\r\n                        cellHtml = renderSlotLine(\"\", slot, \"lecture\");\r\n                        bgColor = \"#e3f2fd\";\r\n                      } else {\r\n                        bgColor = \"#ffffff\";\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  cells.push(\r\n                    `<td class=\"period-column\" style=\"border:2px solid #000;padding:4px 3px;text-align:center;vertical-align:top;background-color:${bgColor};font-size:11px;\">\r\n                      ${cellHtml}\r\n                    </td>`\r\n                  );\r\n                }\r\n                return cells.join(\"\");\r\n              })()}\r\n            </tr>\r\n          `;\r\n        })\r\n        .join(\"\")}\r\n    </tbody>\r\n  `;\r\n\r\n  return `\r\n    <!DOCTYPE html>\r\n    <html lang=\"en\">\r\n      <head>\r\n        <meta charset=\"UTF-8\" />\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n        <title>Timetable - ${divisionName}</title>\r\n        <style>\r\n          body {\r\n            font-family: \"Times New Roman\", Times, serif;\r\n            margin: 24px 20px;\r\n            color: #000000;\r\n            background-color: #ffffff;\r\n          }\r\n          .timetable-main {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            font-size: 12px;\r\n            border: 2px solid #000;\r\n            table-layout: fixed;\r\n          }\r\n          .timetable-main th,\r\n          .timetable-main td {\r\n            word-wrap: break-word;\r\n            overflow-wrap: break-word;\r\n            white-space: normal;\r\n          }\r\n          .day-column {\r\n            width: 60px;\r\n          }\r\n          .period-column {\r\n            width: calc((100% - 60px) / 8);\r\n          }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        ${headerHtml}\r\n        <table class=\"timetable-main\">\r\n          ${tableHead}\r\n          ${tableBody}\r\n        </table>\r\n      </body>\r\n    </html>\r\n  `;\r\n}\r\n\r\nexport default getTimetableHtml;\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Timetable/app/api/timetable/%5Bid%5D/pdf/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { connectToDatabase } from \"../../../../../lib/db\";\r\nimport Timetable from \"../../../../../models/Timetable\";\r\nimport Setting from \"../../../../../models/Setting\";\r\nimport getTimetableHtml from \"../../../../../lib/timetablePdf\";\r\nimport puppeteer from \"puppeteer\";\r\n\r\nexport async function GET(request, { params }) {\r\n  const resolvedParams = await params;\r\n  const { id } = resolvedParams || {};\r\n  const searchParams = new URL(request.url).searchParams;\r\n  const division = searchParams.get(\"division\");\r\n\r\n  if (!id) {\r\n    return NextResponse.json(\r\n      { message: \"Timetable id is required\" },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  if (!division) {\r\n    return NextResponse.json(\r\n      { message: \"Query parameter 'division' is required\" },\r\n      { status: 400 }\r\n    );\r\n  }\r\n\r\n  try {\r\n    await connectToDatabase();\r\n\r\n    const [timetableDoc, settings] = await Promise.all([\r\n      Timetable.findById(id),\r\n      Setting.findOne(),\r\n    ]);\r\n\r\n    if (!timetableDoc) {\r\n      return NextResponse.json(\r\n        { message: \"Timetable not found\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    if (!settings) {\r\n      return NextResponse.json(\r\n        { message: \"Settings not configured\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const rawPayload =\r\n      timetableDoc.result && Object.keys(timetableDoc.result).length > 0\r\n        ? timetableDoc.result\r\n        : timetableDoc.data || {};\r\n\r\n    const timetablePayload =\r\n      rawPayload.timetable && typeof rawPayload.timetable === \"object\"\r\n        ? rawPayload.timetable\r\n        : rawPayload;\r\n\r\n    const trimmedDivision = division.trim();\r\n    const keys = Object.keys(timetablePayload || {});\r\n\r\n    // Try to match requested division; if not found, fall back to first available\r\n    const matchedKey =\r\n      keys.find(\r\n        (key) => key.trim().toLowerCase() === trimmedDivision.toLowerCase()\r\n      ) || keys[0];\r\n\r\n    // Log for debugging\r\n    console.log(\"[PDF Debug] Division requested:\", division);\r\n    console.log(\"[PDF Debug] Matched key:\", matchedKey);\r\n    console.log(\"[PDF Debug] Available divisions:\", keys);\r\n    console.log(\"[PDF Debug] Settings:\", {\r\n      days: settings.days,\r\n      start_hour: settings.start_hour,\r\n      end_hour: settings.end_hour,\r\n      lunch_start_hour: settings.lunch_start_hour,\r\n    });\r\n\r\n    // Generate HTML for the requested division (all batches in one grid)\r\n    const html = getTimetableHtml(\r\n      timetablePayload,\r\n      matchedKey,\r\n      {\r\n        days: settings.days,\r\n        start_hour: settings.start_hour,\r\n        end_hour: settings.end_hour,\r\n        lunch_start_hour: settings.lunch_start_hour,\r\n      },\r\n      timetableDoc.generatedAt || new Date()\r\n    );\r\n\r\n    console.log(\"[PDF Debug] HTML generated successfully\");\r\n\r\n    const browser = await puppeteer.launch({\r\n      headless: true,\r\n      args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"],\r\n    });\r\n\r\n    const page = await browser.newPage();\r\n    await page.setContent(html, { waitUntil: \"networkidle0\" });\r\n\r\n    const pdfBuffer = await page.pdf({\r\n      format: \"A4\",\r\n      landscape: true,\r\n      printBackground: true,\r\n      margin: {\r\n        top: \"20px\",\r\n        bottom: \"20px\",\r\n        left: \"20px\",\r\n        right: \"20px\",\r\n      },\r\n    });\r\n\r\n    await browser.close();\r\n\r\n    return new NextResponse(pdfBuffer, {\r\n      status: 200,\r\n      headers: {\r\n        \"Content-Type\": \"application/pdf\",\r\n        \"Content-Disposition\": `attachment; filename=\"timetable-${matchedKey}.pdf\"`,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error(\"[Timetable PDF] generation failed:\", error);\r\n    console.error(\"[Timetable PDF] Stack trace:\", error.stack);\r\n    return NextResponse.json(\r\n      { \r\n        message: \"Failed to generate PDF\", \r\n        error: error.message,\r\n        stack: error.stack \r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}