{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/Fullstacks/timetable2026/Timetable/components/Navbar.js"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\n\r\nexport default function Navbar() {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [admin, setAdmin] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchAdmin() {\r\n      try {\r\n        const res = await fetch(\"/api/auth/admin/me\");\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setAdmin(data.admin);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch admin:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchAdmin();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setShowDropdown(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  async function handleLogout() {\r\n    try {\r\n      await fetch(\"/api/auth/admin/logout\", { method: \"POST\" });\r\n      router.push(\"/admin/login\");\r\n      router.refresh();\r\n    } catch (err) {\r\n      console.error(\"Logout failed:\", err);\r\n    }\r\n  }\r\n\r\n  const isActive = (path) => pathname?.startsWith(path);\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-50 border-b border-slate-200 bg-white/95 backdrop-blur-sm shadow-sm\">\r\n      <nav className=\"mx-auto flex max-w-7xl items-center justify-between px-4 py-3\">\r\n        {/* Logo and Brand */}\r\n        <Link \r\n          href=\"/admin/dashboard\" \r\n          className=\"flex items-center gap-3 transition-opacity hover:opacity-90\"\r\n        >\r\n          <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-[#1A4C8B] to-blue-700 shadow-md\">\r\n            <span className=\"text-sm font-bold text-white\">ST</span>\r\n          </div>\r\n          <div className=\"hidden sm:block\">\r\n            <span className=\"text-base font-bold text-slate-900\">\r\n              Smart Timetable\r\n            </span>\r\n            <p className=\"text-[10px] text-slate-500\">\r\n              Institute Management System\r\n            </p>\r\n          </div>\r\n        </Link>\r\n\r\n        {/* Navigation Links - Desktop */}\r\n        {admin && (\r\n          <div className=\"hidden md:flex items-center gap-1\">\r\n            <Link\r\n              href=\"/admin/dashboard\"\r\n              className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${\r\n                isActive(\"/admin/dashboard\")\r\n                  ? \"bg-blue-50 text-[#1A4C8B]\"\r\n                  : \"text-slate-600 hover:bg-slate-50 hover:text-slate-900\"\r\n              }`}\r\n            >\r\n              Dashboard\r\n            </Link>\r\n            <Link\r\n              href=\"/manage/timetable/generate\"\r\n              className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${\r\n                isActive(\"/manage/timetable\")\r\n                  ? \"bg-blue-50 text-[#1A4C8B]\"\r\n                  : \"text-slate-600 hover:bg-slate-50 hover:text-slate-900\"\r\n              }`}\r\n            >\r\n              Generate\r\n            </Link>\r\n            <Link\r\n              href=\"/admin/manage-settings\"\r\n              className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${\r\n                isActive(\"/admin/manage-settings\")\r\n                  ? \"bg-blue-50 text-[#1A4C8B]\"\r\n                  : \"text-slate-600 hover:bg-slate-50 hover:text-slate-900\"\r\n              }`}\r\n            >\r\n              Settings\r\n            </Link>\r\n          </div>\r\n        )}\r\n\r\n        {/* Right Side - User Info */}\r\n        <div className=\"flex items-center gap-3\">\r\n          {loading ? (\r\n            <div className=\"h-8 w-8 animate-pulse rounded-full bg-slate-200\"></div>\r\n          ) : admin ? (\r\n            <div className=\"relative\" ref={dropdownRef}>\r\n              <button\r\n                onClick={() => setShowDropdown(!showDropdown)}\r\n                className=\"flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-slate-700 transition-all hover:bg-slate-50\"\r\n              >\r\n                <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-xs font-semibold text-white shadow-sm\">\r\n                  {admin.email?.charAt(0).toUpperCase() || \"A\"}\r\n                </div>\r\n                <div className=\"hidden sm:block text-left\">\r\n                  <p className=\"text-xs font-semibold text-slate-900\">\r\n                    {admin.email?.split(\"@\")[0] || \"Admin\"}\r\n                  </p>\r\n                  <p className=\"text-[10px] text-slate-500\">Administrator</p>\r\n                </div>\r\n                <svg\r\n                  className={`h-4 w-4 text-slate-500 transition-transform ${\r\n                    showDropdown ? \"rotate-180\" : \"\"\r\n                  }`}\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M19 9l-7 7-7-7\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n\r\n              {/* Dropdown Menu */}\r\n              {showDropdown && (\r\n                <div className=\"absolute right-0 mt-2 w-56 rounded-xl border border-slate-200 bg-white shadow-lg ring-1 ring-black/5\">\r\n                  <div className=\"p-3 border-b border-slate-100\">\r\n                    <p className=\"text-sm font-semibold text-slate-900\">\r\n                      {admin.email}\r\n                    </p>\r\n                    <p className=\"text-xs text-slate-500 mt-0.5\">\r\n                      Administrator Account\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"p-1\">\r\n                    <Link\r\n                      href=\"/admin/dashboard\"\r\n                      className=\"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-700 transition-all hover:bg-slate-50\"\r\n                      onClick={() => setShowDropdown(false)}\r\n                    >\r\n                      <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n                      </svg>\r\n                      Dashboard\r\n                    </Link>\r\n                    <Link\r\n                      href=\"/manage/timetable/generate\"\r\n                      className=\"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-700 transition-all hover:bg-slate-50\"\r\n                      onClick={() => setShowDropdown(false)}\r\n                    >\r\n                      <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n                      </svg>\r\n                      Generate Timetable\r\n                    </Link>\r\n                    <Link\r\n                      href=\"/admin/manage-settings\"\r\n                      className=\"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-slate-700 transition-all hover:bg-slate-50\"\r\n                      onClick={() => setShowDropdown(false)}\r\n                    >\r\n                      <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                      </svg>\r\n                      Settings\r\n                    </Link>\r\n                    <div className=\"my-1 border-t border-slate-100\"></div>\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      className=\"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium text-red-600 transition-all hover:bg-red-50\"\r\n                    >\r\n                      <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\r\n                      </svg>\r\n                      Sign Out\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : pathname !== \"/admin/login\" && pathname !== \"/admin/signup\" ? (\r\n            <Link\r\n              href=\"/admin/login\"\r\n              className=\"rounded-lg bg-[#1A4C8B] px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700\"\r\n            >\r\n              Sign In\r\n            </Link>\r\n          ) : null}\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}