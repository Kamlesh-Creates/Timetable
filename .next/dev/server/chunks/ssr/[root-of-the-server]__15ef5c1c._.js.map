{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///D:/Fullstacks/timetable/Timetable/lib/auth.js"],"sourcesContent":["import bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET;\r\nconst JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || \"7d\";\r\n\r\nif (!JWT_SECRET) {\r\n  throw new Error(\"Please define the JWT_SECRET environment variable\");\r\n}\r\n\r\nexport async function hashPassword(password) {\r\n  const salt = await bcrypt.genSalt(10);\r\n  return bcrypt.hash(password, salt);\r\n}\r\n\r\nexport async function verifyPassword(password, passwordHash) {\r\n  return bcrypt.compare(password, passwordHash);\r\n}\r\n\r\nexport function signJwt(payload) {\r\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: JWT_EXPIRES_IN });\r\n}\r\n\r\nexport function verifyJwt(token) {\r\n  try {\r\n    return jwt.verify(token, JWT_SECRET);\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU;AACzC,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI;AAErD,IAAI,CAAC,YAAY;IACf,MAAM,IAAI,MAAM;AAClB;AAEO,eAAe,aAAa,QAAQ;IACzC,MAAM,OAAO,MAAM,4IAAM,CAAC,OAAO,CAAC;IAClC,OAAO,4IAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,eAAe,eAAe,QAAQ,EAAE,YAAY;IACzD,OAAO,4IAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,SAAS,QAAQ,OAAO;IAC7B,OAAO,gJAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAe;AACnE;AAEO,SAAS,UAAU,KAAK;IAC7B,IAAI;QACF,OAAO,gJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///D:/Fullstacks/timetable/Timetable/lib/authMiddleware.js"],"sourcesContent":["import { cookies } from \"next/headers\";\r\nimport { verifyJwt } from \"./auth\";\r\n\r\nexport async function getAuthTokenFromCookies() {\r\n  const cookieStore = await cookies();\r\n  const token = cookieStore.get(\"admin_token\");\r\n  return token?.value || null;\r\n}\r\n\r\nexport async function getAuthenticatedAdmin() {\r\n  const token = await getAuthTokenFromCookies();\r\n  if (!token) return null;\r\n  const payload = verifyJwt(token);\r\n  if (!payload || payload.role !== \"admin\") return null;\r\n  return payload;\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC;IAC9B,OAAO,OAAO,SAAS;AACzB;AAEO,eAAe;IACpB,MAAM,QAAQ,MAAM;IACpB,IAAI,CAAC,OAAO,OAAO;IACnB,MAAM,UAAU,IAAA,wHAAS,EAAC;IAC1B,IAAI,CAAC,WAAW,QAAQ,IAAI,KAAK,SAAS,OAAO;IACjD,OAAO;AACT"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///D:/Fullstacks/timetable/Timetable/app/%28dashboard%29/admin/dashboard/page.js"],"sourcesContent":["import { redirect } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { getAuthenticatedAdmin } from \"../../../../lib/authMiddleware\";\r\n\r\nexport default async function AdminDashboardPage() {\r\n  const admin = await getAuthenticatedAdmin();\r\n\r\n  if (!admin) {\r\n    redirect(\"/admin/login\");\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-[#F1F5F9] text-slate-800\">\r\n      {/* Main layout */}\r\n      <div className=\"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-6 md:flex-row\">\r\n        {/* Sidebar */}\r\n        <aside className=\"w-full space-y-3 rounded-lg bg-white p-4 shadow-sm ring-1 ring-[#E5E7EB] md:w-64\">\r\n          <p className=\"mb-1 text-xs font-semibold uppercase tracking-wide text-slate-500\">\r\n            Navigation\r\n          </p>\r\n          <nav className=\"space-y-1 text-sm\">\r\n            <a\r\n              href=\"/admin/dashboard\"\r\n              className=\"flex items-center justify-between rounded-md bg-blue-50 px-3 py-2 font-medium text-[#1A4C8B]\"\r\n            >\r\n              <span>Overview</span>\r\n              <span className=\"rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-semibold text-blue-700\">\r\n                Active\r\n              </span>\r\n            </a>\r\n            <a\r\n              href=\"/admin/manage-classroom\"\r\n              className=\"block rounded-md px-3 py-2 text-slate-700 transition hover:bg-slate-100\"\r\n            >\r\n              Classrooms\r\n            </a>\r\n            <a\r\n              href=\"/admin/manage-division\"\r\n              className=\"block rounded-md px-3 py-2 text-slate-700 transition hover:bg-slate-100\"\r\n            >\r\n              Divisions\r\n            </a>\r\n            <a\r\n              href=\"/admin/manage-faculty\"\r\n              className=\"block rounded-md px-3 py-2 text-slate-700 transition hover:bg-slate-100\"\r\n            >\r\n              Faculty\r\n            </a>\r\n            <a\r\n              href=\"/admin/manage-subjects\"\r\n              className=\"block rounded-md px-3 py-2 text-slate-700 transition hover:bg-slate-100\"\r\n            >\r\n              Subjects\r\n            </a>\r\n            <a\r\n              href=\"/admin/manage-settings\"\r\n              className=\"block rounded-md px-3 py-2 text-slate-700 transition hover:bg-slate-100\"\r\n            >\r\n              Settings\r\n            </a>\r\n            <a\r\n              href=\"/manage/timetable/generate\"\r\n              className=\"mt-2 block rounded-md bg-[#1A4C8B] px-3 py-2 text-sm font-medium text-white transition hover:bg-blue-800\"\r\n            >\r\n              Generate Timetable\r\n            </a>\r\n          </nav>\r\n\r\n          <div className=\"mt-4 rounded-md border border-[#E5E7EB] bg-[#F8FAFC] p-3 text-xs text-slate-700 shadow-sm\">\r\n            <p className=\"font-medium text-slate-900\">\r\n              Tip for institutes\r\n            </p>\r\n            <p className=\"mt-1 text-[11px] leading-relaxed text-slate-600\">\r\n              Configure all classrooms, divisions, faculty and subjects before\r\n              running the timetable generator for best results.\r\n            </p>\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Main content */}\r\n        <section className=\"flex-1 space-y-5 rounded-lg bg-white p-6 shadow-sm ring-1 ring-[#E5E7EB]\">\r\n          <header className=\"flex flex-col justify-between gap-3 sm:flex-row sm:items-center\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-semibold tracking-tight text-slate-900\">\r\n                Dashboard\r\n              </h1>\r\n              <p className=\"text-base text-slate-600\">\r\n                High-level view of your institute&apos;s timetable setup.\r\n              </p>\r\n            </div>\r\n            <Link\r\n              href=\"/manage/timetable/generate\"\r\n              className=\"inline-flex items-center justify-center rounded-md bg-[#1A4C8B] px-3.5 py-2 text-xs font-medium text-white shadow-sm transition hover:bg-blue-800\"\r\n            >\r\n              Generate Timetable\r\n            </Link>\r\n          </header>\r\n\r\n          {/* Summary cards */}\r\n          <div className=\"grid gap-4 md:grid-cols-3\">\r\n            <div className=\"rounded-lg border border-[#E5E7EB] bg-white p-4 shadow-sm\">\r\n              <p className=\"text-[11px] font-semibold uppercase tracking-wide text-slate-500\">\r\n                Setup progress\r\n              </p>\r\n              <p className=\"mt-2 text-3xl font-semibold text-slate-900\">\r\n                3 / 4\r\n              </p>\r\n              <p className=\"mt-1 text-sm text-slate-600\">\r\n                Core modules configured (classrooms, faculty, subjects,\r\n                divisions).\r\n              </p>\r\n              <div className=\"mt-3 h-1.5 w-full overflow-hidden rounded-full bg-slate-100\">\r\n                <div className=\"h-full w-3/4 rounded-full bg-[#1A4C8B]\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rounded-lg border border-[#E5E7EB] bg-white p-4 shadow-sm\">\r\n              <p className=\"text-[11px] font-semibold uppercase tracking-wide text-slate-500\">\r\n                Timetable status\r\n              </p>\r\n              <p className=\"mt-2 text-base font-medium text-[#0F766E]\">\r\n                Ready to generate\r\n              </p>\r\n              <p className=\"mt-1 text-sm text-slate-600\">\r\n                All required entities exist. You can run the OR-Tools based\r\n                scheduler from here.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"rounded-lg border border-[#E5E7EB] bg-white p-4 shadow-sm\">\r\n              <p className=\"text-[11px] font-semibold uppercase tracking-wide text-slate-500\">\r\n                Admin\r\n              </p>\r\n              <p className=\"mt-2 text-base text-slate-800\">\r\n                Logged in as{\" \"}\r\n                <span className=\"font-semibold text-[#1A4C8B]\">\r\n                  {admin.email}\r\n                </span>\r\n              </p>\r\n              <p className=\"mt-1 text-sm text-slate-600\">\r\n                Use the side navigation to manage institute data.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Timetable preview / activity */}\r\n          <div className=\"grid gap-4 md:grid-cols-[1.5fr_minmax(0,1fr)]\">\r\n            <div className=\"rounded-lg border border-[#E5E7EB] bg-white p-4 shadow-sm\">\r\n              <div className=\"mb-2 flex items-center justify-between\">\r\n                <p className=\"text-xs font-semibold uppercase tracking-wide text-slate-500\">\r\n                  Recent activity\r\n                </p>\r\n                <span className=\"rounded-full bg-slate-100 px-2 py-0.5 text-[10px] text-slate-700\">\r\n                  Demo data\r\n                </span>\r\n              </div>\r\n              <ul className=\"space-y-2 text-sm text-slate-700\">\r\n                <li className=\"flex items-center justify-between rounded-md bg-[#F8FAFC] px-3 py-2\">\r\n                  <span>New classroom added for Block A</span>\r\n                  <span className=\"text-[11px] text-slate-500\">2 min ago</span>\r\n                </li>\r\n                <li className=\"flex items-center justify-between rounded-md bg-[#F8FAFC] px-3 py-2\">\r\n                  <span>Physics subject assigned to Division B</span>\r\n                  <span className=\"text-[11px] text-slate-500\">10 min ago</span>\r\n                </li>\r\n                <li className=\"flex items-center justify-between rounded-md bg-[#F8FAFC] px-3 py-2\">\r\n                  <span>Faculty load updated for Semester 1</span>\r\n                  <span className=\"text-[11px] text-slate-500\">1 hr ago</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <div className=\"rounded-lg border border-[#E5E7EB] bg-white p-4 text-xs text-slate-700 shadow-sm\">\r\n              <p className=\"text-[11px] font-semibold uppercase tracking-wide text-slate-500\">\r\n                Timetable snapshot\r\n              </p>\r\n              <p className=\"mt-2 text-[11px] leading-relaxed text-slate-600\">\r\n                Once you generate a timetable, a quick summary of periods,\r\n                conflicts and utilization will appear here to help you review\r\n                the schedule before publishing it for the institute.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}